<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Document</title>
    <!-- Latest compiled and minified CSS -->

    <link rel="stylesheet" href="index.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
    />

    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="semantic/dist/semantic.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.1.1.min.js"
      integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
      crossorigin="anonymous"
    ></script>
    <scrips src="semantic/dist/semantic.min.js"></scrips>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script
      src="https://unpkg.com/react/umd/react.production.min.js"
      crossorigin
    ></script>

    <script
      src="https://unpkg.com/react-dom/umd/react-dom.production.min.js"
      crossorigin
    ></script>
  </head>

  <body >
    <div id="root"></div>
    <script type="text/babel">
      const mocked = {
        time: {
          updated: "Jan 6, 2022 12:41:00 UTC",
          updatedISO: "2022-01-06T12:41:00+00:00",
          updateduk: "Jan 6, 2022 at 12:41 GMT",
        },
        disclaimer:
          "This data was produced from the CoinDesk Bitcoin Price Index (USD). Non-USD currency data converted using hourly conversion rate from openexchangerates.org",
        chartName: "Bitcoin",
        bpi: {
          USD: {
            code: "USD",
            symbol: "&#36;",
            rate: "42,795.5183",
            description: "United States Dollar",
            rate_float: 42795.5183,
          },
          GBP: {
            code: "GBP",
            symbol: "&pound;",
            rate: "31,614.5900",
            description: "British Pound Sterling",
            rate_float: 31614.59,
          },
          EUR: {
            code: "EUR",
            symbol: "&euro;",
            rate: "37,827.3438",
            description: "Euro",
            rate_float: 37827.3438,
          },
        },
      };

      // ReactDOM.render(<MountLifeCycle />, document.getElementById("root"));
      const COLORS = {
        true: "green",
        false: "red",
        null: "gray",
      };

      const useCurrency = (currency) => {
        const [isGrowing, setIsGrowing] = React.useState(null);
        // const [oldRate, setOldRate] = React.useState(null);
        const [rate, setRate] = React.useState(null);

        React.useEffect(() => {
          // latest state of server
          async function grabData() {
            const data = await fetch(
              "https://api.coindesk.com/v1/bpi/currentprice.json"
            ).then((res) => res.json());

            const serverRate = data.bpi[currency].rate_float;

            if (!rate) setRate(serverRate);
            // no rate not isGrowing
            else if (rate !== serverRate) {
              if (serverRate < rate) setIsGrowing(false);
              else setIsGrowing(true);

              setRate(serverRate);
            }
          }

          let timer = setInterval(grabData, 1000);
          return () => clearInterval(timer);
        }, [rate]);

        return [isGrowing, rate];

        // {}
      };

      const App = () => {
        const [usdGrowing, usdRate] = useCurrency("USD");

        const [gbpGrowing, gbpRate] = useCurrency("GBP");
        const [eurGrowing, eurRate] = useCurrency("EUR");
        return (
          <div>
            <nav className="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
              <button
                className="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#collapsibleNavbar"
              >
                <span className="navbar-toggler-icon"/>
              </button>
              <div className="collapse navbar-collapse" id="collapsibleNavbar">
                <a className="navbar-brand brand" href="#">
                  BIT MARK
                </a>
                <a className="nav-link n_link" href="./index.html">
                  Home
                </a>
                <a className="nav-link n_link" href="market.html">
                  Market News
                </a>
                <a className="nav-link n_link" href="about.html">
                  About us
                </a>
              </div>
            </nav>
            <div id="demo" className="carousel slide" data-ride="carousel">
            
              <div className="carousel-inner">
                <div className="carousel-item">
                  <img
                    src="./img/بیتکوین-12.jpg"
                    alt="New York"
                    className="c_img"
                  />
                </div>
                <div className="carousel-item active">
                  <img
                    src="./img/bitcoin-hack-photo.jpg"
                    alt="Los Angeles"
                    className="c_img"
                  />
                </div>
                <div className="carousel-item">
                  <img src="./img/OlGR8c.jpg" alt="Chicago" className="c_img" />
                </div>
              </div>

              <div>
                <div className="ui segment">
                  <p/>
                  <div className="ui active dimmer">
                    <div className="ui loader">
                      <div className="spinner-grow text-dark spinner"/>
                    </div>
                  </div>
                </div>
              </div>
              <a className="carousel-control-prev" href="#demo" data-slide="prev">
                <span className="carousel-control-prev-icon"/>
              </a>
              <a className="carousel-control-next" href="#demo" data-slide="next">
                <span className="carousel-control-next-icon"/>
              </a>
            </div>

            <div className="card-container">
              <div className="card cards">
                <div className="card-header">
                  <img
                    src="./img/bitcoin-btc-cash-euro-bills_89378-569.jpg"
                    alt="img"
                    className="card-img"
                  />
                </div>
                <div className="card-body">
                  <h4 className="card-title">EUR/BIT</h4>
                  price:
                  <p style={{ color: COLORS[eurGrowing] }}> {eurRate}&euro; </p>
                  <div>
                    {" "}
                    <a href="chart2.html" className="mylink">
                      see price chart
                    </a>
                  </div>
                </div>
              </div>
              <div className="card cards">
                <div className="card-header">
                  <img
                    src="./img/https___specials-images.forbesimg.com_imageserve_869259640_0x0.jpg"
                    alt="img"
                    className="card-img"
                  />
                </div>
                <div className="card-body">
                  <h4 className="card-title">USD/BIT</h4>
                  price:{" "}
                  <p style={{ color: COLORS[usdGrowing] }}> {usdRate}&#36;</p>
                  <div>
                    {" "}
                    <a href="chart.html" className="mylink">
                      see price chart
                    </a>
                  </div>
                </div>
              </div>
              <div className="card cards">
                <div className="card-header">
                  <img
                    src="./img/_116329010_tv064829922.jpg"
                    alt="img"
                    className="card-img"
                  />
                </div>
                <div className="card-body">
                  <h4 className="card-title">GBP/BIT</h4>
                  price:
                  <p style={{ color: COLORS[gbpGrowing] }}>
                    {" "}
                    {gbpRate}&pound;{" "}
                  </p>
                  <div>
                    <a href="chart3.html" className="mylink">
                      see price chart
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <footer className="foot"></footer>
              
          </div>
        );
      };
      ReactDOM.render(<App />, document.getElementById("root"));
    </script>
  </body>
</html>
